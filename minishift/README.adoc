= Deploying f8toggle services on Minishift

== Pre-requisites
* Install https://docs.openshift.org/latest/minishift/getting-started/installing.html[Minishift]
* Install OpenShift command oc
* Start minishift
```
minishift start --memory=7000 --cpus=4 --disk-size=50g
```
on macOS:
```
minishift start --vm-driver=xhyve --memory=7000 --cpus=4 --disk-size=50g
```
* Point `oc` to Minishift
```
oc config use-context minishift
oc login -u developer:developer
```

== Build and Deploy to minishift

* Build image from centos
```
eval $(minishift docker-env)
oc project fabric8
docker build -t push.registry.devshift.net/fabric8-services/fabric8-toggles -f Dockerfile .
```
* Push it to minishift repository
docker login -u developer -p $(oc whoami -t) $(minishift openshift registry)
docker tag push.registry.devshift.net/fabric8-services/fabric8-toggles 172.30.1.1:5000/fabric8/fabric8-toggles:latest
docker push 172.30.1.1:5000/fabric8/fabric8-toggles:latest
```

* clone the link:https://github.com/xcoulon/fabric8-minishift[fabirc8-minishift] repository:
This repositoryhold kedge yml files to deploy on fabric8 on minishift.
```
git clone git@github.com:xcoulon/fabric8-minishift.git
```
* Deploy on minishift
```
cd fabric8-minishift
make deploy-toggles
```